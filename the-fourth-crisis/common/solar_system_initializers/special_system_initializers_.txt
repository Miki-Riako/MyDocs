@base_moon_distance = 10

# Guardians of Zanaam
special_init_06 = {
	class = "rl_standard_stars"
	asteroid_belt = {
		type = rocky_asteroid_belt
		radius = 150
	}
	usage = misc_system_init
	usage_odds = {
		base = 2000000
		modifier = {
			factor = 0
			is_bottleneck_system = yes
		}
	}
	max_instances = 1
	scaled_spawn_chance = 100
	flags = { guardians_of_zanaam hostile_system }

	planet = {
		count = 1
		class = star
		orbit_distance = 0
		orbit_angle = 1
		size = { min = 20 max = 30 }
		has_ring = no
	}

	change_orbit = 45

	planet = {
		count = 1
		class = "pc_broken"
		size = 25
		orbit_angle = { min = 90 max = 270 }

		init_effect = { prevent_anomaly = yes }
	}

	planet = {
		name = NAME_Zanaam
		count = 1
		orbit_distance = 30
		class = "pc_gaia"
		orbit_angle = { min = 90 max = 270 }
		size = 25

		init_effect = {
			save_event_target_as = zanaam_planet
			add_deposit = d_valley_of_zanaam

			create_country = {
				name = "NAME_Guardians_of_Zanaam"
				type = faction
			}
			last_created_country = {
				set_country_flag = zanaam_country
				create_fleet = {
					name = "NAME_Guardians_of_Zanaam"
					settings = { spawn_debris = no }
					effect = {
						set_owner = PREV
						set_fleet_flag = zanaam_fleet
						create_ship = {
							name = "NAME_Defensive_Alpha"
							design = "NAME_Guardian"
						}
						create_ship = {
							name = "NAME_Defensive_Beta"
							design = "NAME_Guardian"
						}
						create_ship = {
							name = "NAME_Defensive_Gamma"
							design = "NAME_Guardian"
						}
						create_ship = {
							name = "NAME_Defensive_Delta"
							design = "NAME_Guardian"
						}
						create_ship = {
							name = "NAME_Defensive_Epsilon"
							design = "NAME_Guardian"
						}
						create_ship = {
							name = "NAME_Defensive_Zeta"
							design = "NAME_Guardian"
						}
						create_ship = {
							name = "NAME_Defensive_Eta"
							design = "NAME_Guardian"
						}
						create_ship = {
							name = "NAME_Defensive_Theta"
							design = "NAME_Guardian"
						}
						create_ship = {
							name = "NAME_Defensive_Iota"
							design = "NAME_Guardian"
						}
						create_ship = {
							name = "NAME_Defensive_Kappa"
							design = "NAME_Guardian"
						}
						create_ship = {
							name = "NAME_Defensive_Lambda"
							design = "NAME_Guardian"
						}
						create_ship = {
							name = "NAME_Defensive_Mu"
							design = "NAME_Guardian"
						}
						create_ship = {
							name = "NAME_Defensive_Nu"
							design = "NAME_Guardian"
						}
						create_ship = {
							name = "NAME_Defensive_Ksi"
							design = "NAME_Guardian"
						}
						create_ship = {
							name = "NAME_Defensive_Omicron"
							design = "NAME_Guardian"
						}
						create_ship = {
							name = "NAME_Defensive_Pi"
							design = "NAME_Guardian"
						}
						create_ship = {
							name = "NAME_Defensive_Rho"
							design = "NAME_Guardian"
						}
						create_ship = {
							name = "NAME_Defensive_Sigma"
							design = "NAME_Guardian"
						}
						create_ship = {
							name = "NAME_Defensive_Tau"
							design = "NAME_Guardian"
						}
						create_ship = {
							name = "NAME_Defensive_Upsilon"
							design = "NAME_Guardian"
						}
						create_ship = {
							name = "NAME_Defensive_Phi"
							design = "NAME_Guardian"
						}
						create_ship = {
							name = "NAME_Defensive_Chi"
							design = "NAME_Guardian"
						}
						create_ship = {
							name = "NAME_Defensive_Psi"
							design = "NAME_Guardian"
						}
						create_ship = {
							name = "NAME_Defensive_Omega"
							design = "NAME_Guardian"
						}
						set_location = event_target:zanaam_planet
						add_modifier = {
							modifier = sanctuary_power
							days = -1
						}
					}
				}
			}
		}
	}

	change_orbit = 10

	planet = {
		count = 1
		orbit_distance = 20
		class = "pc_broken"
		orbit_angle = { min = 90 max = 270 }
		size = 25
		init_effect = { prevent_anomaly = yes }
	}

	planet = {
		count = 1
		orbit_distance = 20
		class = "pc_broken"
		orbit_angle = { min = 90 max = 270 }
		size = 25

		init_effect = { prevent_anomaly = yes }
	}

	init_effect = {
		while = {
			count = 6
			create_ambient_object = {
				type = "abandoned_ship_2_object"
				location = solar_system
			}
		}
	}
}

# Crystal Manufactory version of Basic 4
crystal_manufactory_system = {
	class = "rl_standard_stars"
	flags = { manufactory_system }
	asteroid_belt = {
		type = rocky_asteroid_belt
		radius = 120
	}

	usage = misc_system_init
	usage_odds = 5
	max_instances = 1
	spawn_chance = 100

	planet = {
		count = 1
		class = star
		orbit_distance = 0
		orbit_angle = 1
		size = { min = 20 max = 30 }
		has_ring = no
	}

	change_orbit = 120

	planet = {
		count = { min = 3 max = 6 }
		class = pc_asteroid
		orbit_distance = 0
		orbit_angle = { min = 90 max = 270 }
	}

	change_orbit = -80

	planet = {
		count = { min = 0 max = 2 }
		orbit_distance = 20
		orbit_angle = { min = 90 max = 270 }
	}

	change_orbit = 80

	planet = {
		count = { min = 0 max = 2 }
		orbit_distance = 40
		orbit_angle = { min = 90 max = 270 }
	}

	init_effect = {
		random_system_planet = {
			limit = {
				habitable_planet = no
				has_deposit_for = shipclass_mining_station
				#reduces spawn rate of manufactory, but not system
			}
			create_ambient_object = {
				type = "crystal_manufactory_object"
				location = this
			}
			last_created_ambient_object = {
				set_ambient_object_flag = manufactory
			}
			add_anomaly = {
				category = CRYSTAL_MANUFACTORY_CAT
			}
		}
	}
}

# Trappist System
trappist_initializer = {
	name = "NAME_Trappist"
	class = "sc_m"
	usage = misc_system_init
	usage_odds = 2000000
	max_instances = 1
	scaled_spawn_chance = 100

	planet = {
		class = "pc_m_star"
		orbit_distance = 0
		orbit_angle = 1
		size = 20
		has_ring = no
	}
	# Trappist-1b
	planet = {
		class = "pc_molten"
		orbit_distance = 20
		orbit_angle = 15
		size = 16
		has_ring = no
	}
	# Trappist-1c
	planet = {
		class = "pc_barren"
		orbit_distance = 16
		orbit_angle = 85
		size = 16
		has_ring = no
	}
	# Trappist-1d
	planet = {
		class = "pc_toxic"
		orbit_distance = 16
		orbit_angle = 110
		size = 12
		has_ring = no
	}
	# Trappist-1e
	planet = {
		class = "pc_barren"
		orbit_distance = 16
		orbit_angle = 125
		size = 14
		has_ring = no
		init_effect = {
			add_modifier = {
				modifier = "terraforming_candidate"
				days = -1
			}
		}
	}
	# Trappist-1f
	planet = {
		class = "pc_continental"
		orbit_distance = 16
		orbit_angle = 65
		size = 16
		has_ring = no
	}
	# Trappist-1g
	planet = {
		class = "pc_barren_cold"
		orbit_distance = 16
		orbit_angle = -130
		size = 18
		has_ring = no
		init_effect = {
			add_modifier = {
				modifier = "terraforming_candidate"
				days = -1
			}
		}
	}
	# Trappist-1h
	planet = {
		class = "pc_frozen"
		orbit_distance = 16
		orbit_angle = 245
		size = 12
		has_ring = no
	}
}

parvus_system = {
	name = "NAME_Parvus"
	class = "sc_k"
	asteroid_belt = {
		type = rocky_asteroid_belt
		radius = 170
	}
	usage = misc_system_init
	usage_odds = {
		base = 100
		modifier = {
			factor = 0
			is_fe_cluster = yes
		}
		modifier = {
			factor = 0
			has_star_flag = empire_cluster
		}
	}
	max_instances = 1
	scaled_spawn_chance = 100

	planet = {
		count = 1
		class = star
		orbit_distance = 0
		orbit_angle = 1
		size = { min = 22 max = 22 }
		has_ring = no
	}

	change_orbit = 45

	planet = {
		count = 1
		class = "pc_molten"
		size = 13
		orbit_angle = { min = 90 max = 270 }
	}

	change_orbit = 10

	planet = {
		count = 1
		class = "pc_barren"
		size = 13
		orbit_angle = { min = 90 max = 270 }
	}
	planet = {
		count = 1
		orbit_distance = 30
		class = "pc_desert"
		orbit_angle = { min = 90 max = 270 }
		size = 22
		modifiers = none
		init_effect = {
			prevent_anomaly = yes
			add_anomaly = {
				category = NANO_SWARM_CAT
			}
		}
		flags = { pre_sapients_forbidden }
	}
	change_orbit = 50
	planet = {
		count = { min = 3 max = 6 }
		class = pc_asteroid
		orbit_distance = 0
		orbit_angle = { min = 40 max = 100 }
	}

	change_orbit = 40

	planet = {
		count = 1
		class = "pc_gas_giant"
		orbit_distance = 25
		orbit_angle = 110
		size = 30
		change_orbit = 7
	}

	change_orbit = 10

	planet = {
		count = 1
		class = "pc_gas_giant"
		orbit_distance = 25
		orbit_angle = 90
		size = 36
		has_ring = yes
		change_orbit = 7
		moon = {
			class = "pc_barren"
			size = 16
			orbit_distance = 13
			orbit_angle = 20
			has_ring = no
		}
	}
}

# Polaris
polaris_civilization = {
	name = "NAME_Polaris"
	class = "sc_trinary_3"
	asteroid_belt = {
		type = icy_asteroid_belt
		radius = 120
	}
	usage = misc_system_init
	usage_odds = {
		base = 2000000
		modifier = {
			factor = 0
			is_bottleneck_system = yes
		}
	}
	max_instances = 1
	scaled_spawn_chance = 100

	planet = {
		name = "NAME_PolarisAa"
		count = 1
		class = star
		orbit_distance = 0
		orbit_angle = 1
		size = { min = 33 max = 33 }
		has_ring = no
		flags = { polaris_patrol_1 }
	}
	change_orbit = 20

	planet = {
		name = "NAME_PolarisAb"
		count = 1
		class = star
		orbit_distance = 0
		orbit_angle = 1
		size = { min = 7 max = 7 }
		has_ring = no
	}

	change_orbit = 65

	planet = {
		name = "NAME_PolarisB"
		count = 1
		class = star
		orbit_distance = 0
		orbit_angle = 1
		size = { min = 7 max = 7 }
		has_ring = no
	}

	change_orbit = 33

	planet = {
		count = { min = 1 max = 4 }
		class = pc_ice_asteroid
		orbit_distance = 0
		orbit_angle = { min = 90 max = 270 }
	}

	change_orbit = 80

	planet = {
		count = 1
		class = "pc_molten"
		size = 12
		orbit_angle = { min = 90 max = 270 }
		init_effect = { prevent_anomaly = yes }
		flags = { polaris_patrol_2 }
	}

	planet = {
		count = 1
		orbit_distance = 30
		class = "pc_ocean"
		orbit_angle = { min = 90 max = 270 }
		size = 23
		flags = { polaris_patrol_3 }
		init_effect = {
			save_event_target_as = polaris_planet
			prevent_anomaly = yes
			add_deposit = d_polaris_city
			create_archaeological_site = site_polaris_seed_vault
			create_country = {
				name = "NAME_Polaris_space_name"
				type = faction
			}
			last_created_country = {
				set_country_flag = polaris_country
				create_fleet = {
					name = "NAME_Polaris_space_name"
					settings = { spawn_debris = no }
					effect = {
						set_owner = PREV
						set_fleet_flag = polaris_fleet
						create_ship = {
							name = "NAME_Polaris_A"
							design = "NAME_Polaris_ship"
						}
						create_ship = {
							name = "NAME_Polaris_B"
							design = "NAME_Polaris_ship"
						}
						create_ship = {
							name = "NAME_Polaris_C"
							design = "NAME_Polaris_ship"
						}
						create_ship = {
							name = "NAME_Polaris_D"
							design = "NAME_Polaris_ship"
						}
						create_ship = {
							name = "NAME_Polaris_E"
							design = "NAME_Polaris_ship"
						}
						create_ship = {
							name = "NAME_Polaris_F"
							design = "NAME_Polaris_ship"
						}
						create_ship = {
							name = "NAME_Polaris_G"
							design = "NAME_Polaris_ship"
						}
						set_location = event_target:polaris_planet
						set_fleet_stance = aggressive
						set_aggro_range_measure_from = return_point
						set_aggro_range = 250
						queue_actions = {
							repeat = {
								find_closest_planet = {
									trigger = {
										id = polaris.patrol.1
										has_planet_flag = polaris_patrol_1
									}
									found_planet = {
										move_to = this
										orbit_planet = this
										wait = {
											duration = 30
										}
									}
								}
								find_closest_planet  = {
									trigger = {
										id = polaris.patrol.2
										has_planet_flag = polaris_patrol_2
									}
									found_planet = {
										move_to = this
										orbit_planet = this
										wait = {
											duration = 30
										}
									}
								}
								find_closest_planet  = {
									trigger = {
										id = polaris.patrol.3
										has_planet_flag = polaris_patrol_3
									}
									found_planet = {
										move_to = this
										orbit_planet = this
										wait = {
											duration = 30
										}
									}
								}
							}
						}
					}
				}
			}
		}
	}

	change_orbit = 40

    planet = {
		count = { min = 1 max = 3 }
		orbit_distance = 20
		orbit_angle = { min = 90 max = 270 }
		change_orbit = @base_moon_distance

		moon = {
	  		count = { min = 0 max = 2 }
	    	orbit_distance = 5
	    	orbit_angle = { min = 90 max = 270 }
		}
    }

	init_effect = {
		while = {
			count = 2
			create_ambient_object = {
				type = "abandoned_ship_2_object"
				location = solar_system
			}
			create_ambient_object = {
				type = "small_debris_object"
				location = solar_system
			}
			create_ambient_object = {
				type = "medium_debris_01_object"
				location = solar_system
			}
		}
	}
}

# Holibrae System
Holibrae_initializer = {
	name = "NAME_Holibrae"
	class = "sc_m"
	usage = misc_system_init
	usage_odds = {
		base = 4
		modifier = {
			factor = 0
			has_star_flag = empire_cluster
		}
	}
	max_instances = 1
	scaled_spawn_chance = 100
	flags = { holibrae_system hostile_system }
	#create nebula
	init_effect = {
		create_ambient_object = {
			type = "nebula_L4_entity"
			entity_offset_height = -5
			location = this
		}
		last_created_ambient_object = {
			set_location = {
				target = prev
				distance = 0
				angle = random
			}
		}
		#Spawn Holibrae Destroyers and have them patrol the system semi-randomly
		create_drone_country = yes
		random_system_planet = {
			limit = {
				is_star = no
				is_moon = no
			}
			save_event_target_as = holibrae_trigger_1
		}
		random_system_planet = {
			limit = {
				is_star = no
				is_moon = no
				NOT = {
					is_same_value = event_target:holibrae_trigger_1
				}
			}
			save_event_target_as = holibrae_trigger_2
		}
		random_system_planet = {
			limit = {
				is_star = no
				is_moon = no
				NOR = {
					is_same_value = event_target:holibrae_trigger_1
					is_same_value = event_target:holibrae_trigger_2
				}
			}
			save_event_target_as = holibrae_trigger_3
		}
		event_target:drone_country = {
			create_fleet = {
				name = "NAME_Holibrae_Corps"
				effect = {
					set_owner = event_target:drone_country
					while = {
						count = 4
						create_ship = {
							name = ""
							design = "NAME_Holibrae_Destroyer"
						}
					}
					set_location = event_target:holibrae_trigger_3
					set_fleet_stance = aggressive
					set_aggro_range_measure_from = self
					set_aggro_range = 20
					queue_actions = {
						repeat = {
							find_closest_planet = {
								trigger = {
									id = "holibraeC.1.trigger.1"
									is_planet = event_target:holibrae_trigger_1
								}
								found_planet = {
									move_to = this
									orbit_planet = THIS
								}
							}
							find_closest_planet = {
								trigger = {
									id = "holibraeC.1.trigger.2"
									is_planet = event_target:holibrae_trigger_2
								}
								found_planet = {
									move_to = this
									orbit_planet = THIS
								}
							}
							find_closest_planet = {
								trigger = {
									id = "holibraeC.1.trigger.3"
									is_planet = event_target:holibrae_trigger_3
								}
								found_planet = {
									move_to = this
									orbit_planet = THIS
								}
							}
						}
					}
				}
			}
		}
	}

	planet = {
		class = "pc_m_star"
		orbit_distance = 0
		orbit_angle = 1
		size = 25
		has_ring = no
	}
	# Holibrae I
	planet = {
		class = "pc_molten"
		orbit_distance = 45
		orbit_angle = 15
		size = 16
		has_ring = no
	}
	# Holibrae II
	planet = {
		class = "pc_barren"
		orbit_distance = 80
		orbit_angle = 15
		size = 18
		has_ring = no
	}
	# Holibrae III
	planet = {
		class = "pc_continental"
		orbit_distance = 90
		orbit_angle = 15
		size = 12
		has_ring = no
	}
	# Holibrae IV
	planet = {
		class = "pc_arctic"
		orbit_distance = 100
		orbit_angle = 25
		size = 14
		has_ring = no
	}
	# Holibrae V
	planet = {
		class = "pc_frozen"
		orbit_distance = 120
		orbit_angle = 60
		size = 16
		has_ring = no
	}
}

# Debris belt system
debris_belt_initializer = {
	class = "sc_m"
	usage = misc_system_init
	usage_odds = 8
	max_instances = 1
	scaled_spawn_chance = 100

	asteroid_belt = {
		type = debris_asteroid_belt
		radius = 158
	}

	planet = {
		class = pc_m_star
		orbit_distance = 0
		orbit_angle = 1
		size = 30
		has_ring = no
	}

	change_orbit = 60

	planet = {
		class = pc_molten
		orbit_angle = 15
		size = 16
		has_ring = yes
	}

	change_orbit = 86

	planet = {
		class = pc_asteroid
		size = 1
		orbit_distance = 0
		orbit_angle = { min = 90 max = 270 }
		name = NAME_The_Cabin

		init_effect = {
			clear_deposits = yes
			prevent_anomaly = yes
			create_archaeological_site = site_debris_belt
		}
	}

	change_orbit = 10

	planet = {
		count = { min = 2 max = 3 }
		orbit_distance = 60
		class = pc_gas_giant
		orbit_angle = { min = 90 max = 270 }
		size = { min = 18 max = 36 }
		change_orbit = @base_moon_distance

		moon = {
			count = { min = 1 max = 3 }
			size = { min = 8 max = 20 }
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 6
		}
	}
}

# The Mall of the Galaxy
the_star_mall_initializer = {
	class = "sc_g"
	usage = misc_system_init
	usage_odds = {
		base = 0
		modifier = {
			OR = {
				host_has_dlc = "Utopia"
				host_has_dlc = "Federations"
			}
			add = 2000000
		}
		modifier = {
			factor = 0
			is_bottleneck_system = yes
		}
	}
	max_instances = 1
	scaled_spawn_chance = 100
	flags = { star_mall hostile_system }

	planet = {
		count = 1
		class = "pc_g_star"
		orbit_distance = 0
		orbit_angle = 1
		size = { min = 20 max = 30 }
		has_ring = no
	}

	change_orbit = 30

	planet = {
		count = 1
		class = "pc_asteroid"
		name = NAME_Parking_Orbit_White_Dwarf
		has_ring = no
		orbit_angle = { min = 90 max = 270 }

		init_effect = {
			prevent_anomaly = yes
			create_ambient_object = {
				type = caravaneer_billboard_2
				scale = 3
				location = this
				entity_offset_height = -4
			}
			last_created_ambient_object = {
				set_location = {
					target = prev
					distance = 0
					angle = 15
				}
			}
			set_planet_flag = star_mall_patrol_1
		}
	}

	change_orbit = 15

	planet = {
		count = 1
		class = "pc_asteroid"
		name = NAME_Parking_Orbit_Main_Sequence
		has_ring = no
		orbit_angle = { min = 90 max = 270 }

		init_effect = {
			prevent_anomaly = yes
			create_ambient_object = {
				type = caravaneer_billboard_3
				scale = 3
				location = this
				entity_offset_height = -4
			}
			last_created_ambient_object = {
				set_location = {
					target = prev
					distance = 0
					angle = 30
				}
			}
			set_planet_flag = star_mall_patrol_2
		}
	}

	change_orbit = 20

	planet = {
		count = 1
		class = pc_gas_giant
		size = 25
		has_ring = no
		orbit_angle = { min = 90 max = 270 }

		moon = {
			class = "pc_habitat"
			size = 6
			orbit_distance = 12
			orbit_angle = 40
			deposit_blockers = none
			init_effect = {
				prevent_anomaly = yes
				add_modifier = {
					modifier = star_mall_habitat
					days = -1
				}
				set_planet_flag = megastructure
				set_planet_flag = habitat
				set_planet_flag = habitat_level_3
				set_planet_flag = star_mall_habitat
				set_planet_flag = pre_sapients_forbidden
				clear_blockers = yes
				set_planet_entity = {
					entity = habitat_phase_03_entity
					graphical_culture = avian_01
				}
				add_deposit = d_star_mall_promenade_blocker
				while = {
					count = 8
					add_deposit = d_star_mall_blocker
				}
				set_planet_flag = star_mall_patrol_3
			}
		}
	}

	change_orbit = 15

	planet = {
		count = 1
		class = "pc_asteroid"
		name = NAME_Parking_Orbit_Magnetar
		has_ring = no
		orbit_angle = { min = 90 max = 270 }

		init_effect = {
			prevent_anomaly = yes
			create_ambient_object = {
				type = caravaneer_billboard_1
				scale = 3
				location = this
				entity_offset_height = -4
			}
			last_created_ambient_object = {
				set_location = {
					target = prev
					distance = 0
					angle = 45
				}
			}
			set_planet_flag = star_mall_patrol_4
		}
	}

	change_orbit = 15

	planet = {
		count = 1
		class = "pc_asteroid"
		name = NAME_Parking_Orbit_Black_Hole
		has_ring = no
		orbit_angle = { min = 90 max = 270 }

		init_effect = {
			prevent_anomaly = yes
			create_ambient_object = {
				type = caravaneer_billboard_2
				scale = 3
				location = this
				entity_offset_height = -4
			}
			last_created_ambient_object = {
				set_location = {
					target = prev
					distance = 0
					angle = 60
				}
			}
			set_planet_flag = star_mall_patrol_5
		}
	}

	change_orbit = 15

	planet = {
		count = 1
		class = "pc_asteroid"
		name = NAME_Parking_Orbit_Pulsar
		has_ring = no
		orbit_angle = { min = 90 max = 270 }

		init_effect = {
			prevent_anomaly = yes
			create_ambient_object = {
				type = caravaneer_billboard_1
				scale = 3
				location = this
				entity_offset_height = -4
			}
			last_created_ambient_object = {
				set_location = {
					target = prev
					distance = 0
					angle = 75
				}
			}
			set_planet_flag = star_mall_patrol_6
		}
	}

	change_orbit = 15

	planet = {
		count = 1
		class = "pc_asteroid"
		name = NAME_Parking_Orbit_Brown
		has_ring = no
		orbit_angle = { min = 90 max = 270 }

		init_effect = {
			prevent_anomaly = yes
			create_ambient_object = {
				type = caravaneer_billboard_1
				scale = 3
				location = this
				entity_offset_height = -4
			}
			last_created_ambient_object = {
				set_location = {
					target = prev
					distance = 0
					angle = 90
				}
			}
			set_planet_flag = star_mall_patrol_7
		}
	}
}
breachsealer_system = {
	class = "sc_g"
	name = NAME_Seddom
	asteroid_belt = {
		type = rocky_asteroid_belt
		radius = 120
	}

	usage = misc_system_init
	usage_odds = {
		base = 90000
		modifier = {
			factor = 0
			has_star_flag = empire_cluster
		}
	}
	max_instances = 1
	scaled_spawn_chance = 100

	planet = {
		name = "NAME_Seddom"
		class = "pc_g_star"
		orbit_distance = 0
		orbit_angle = 1
		size = 1
		has_ring = no
		flags = { star_seddom }
		init_effect = {
			add_deposit = d_energy_1
			create_ambient_object = {
				type = "extradimensional_2"
				location = this
				use_3d_location = yes
				entity_offset = { min = 6 max = 6 }
				entity_offset_angle = { min = 90 max = 90 }
				entity_offset_height = { min = 0 max = 0 }
				scale = 0.2
			}
			last_created_ambient_object = {
				set_ambient_object_flag = breachsealer_breach
			}
		}
	}

	planet = {
		name = "NAME_Ariph"
		class = "pc_shrouded"
		orbit_distance = 60
		orbit_angle = 0
		size = 9
		has_ring = no
		init_effect = {
			add_anomaly = {
				category = BREACHSEALER_CAT
			}
		}
		flags = { planet_Ariph suppress_archaeological_sites }
	}

	planet = {
		name = "NAME_Hari_XXIV"
		class = "pc_shrouded"
		orbit_distance = 30
		orbit_angle = 63
		size = 13
		has_ring = no
		init_effect = {
			prevent_anomaly = yes
		}
		flags = { planet_Hari_XXIV suppress_archaeological_sites }
	}

	planet = {
		name = "NAME_Risasi"
		class = "pc_shrouded"
		orbit_distance = 30
		orbit_angle = 21
		size = 5
		has_ring = no
		init_effect = {
			prevent_anomaly = yes
		}
		flags = { planet_Risasi suppress_archaeological_sites }
	}
	planet = {
		name = "NAME_Aridder"
		class = "pc_shrouded"
		orbit_distance = 40
		orbit_angle = 99
		size = 20
		has_ring = no
		init_effect = {
			prevent_anomaly = yes
		}
		flags = { planet_Aridder suppress_archaeological_sites }
	}

	planet = {
		name = "NAME_E'cho"
		class = "pc_shrouded"
		orbit_distance = 20
		orbit_angle = 25
		size = 11
		has_ring = no
		init_effect = {
			prevent_anomaly = yes
		}
		flags = { planet_Echo suppress_archaeological_sites }
	}

	planet = {
		name = "NAME_Rover"
		class = "pc_shrouded"
		orbit_distance = 60
		orbit_angle = 100
		size = 15
		has_ring = yes
		init_effect = {
			prevent_anomaly = yes
		}
		flags = { planet_Rover suppress_archaeological_sites }
	}
	planet = {
		name = "NAME_Jasepe"
		class = "pc_shrouded"
		orbit_distance = 30
		orbit_angle = 55
		size = 22
		has_ring = no
		init_effect = {
			prevent_anomaly = yes
		}
		flags = { planet_Jasepe suppress_archaeological_sites }
	}
	planet = {
		name = "NAME_Blaxe"
		class = "pc_shrouded"
		orbit_distance = 45
		orbit_angle = 35
		size = 31
		has_ring = yes
		init_effect = {
			prevent_anomaly = yes
		}
		flags = { planet_Blaxe suppress_archaeological_sites }
	}
	planet = {
		name = "NAME_Glavi"
		class = "pc_shrouded"
		orbit_distance = 45
		orbit_angle = 51
		size = 42
		has_ring = no
		init_effect = {
			prevent_anomaly = yes
		}
		flags = { planet_Glavi suppress_archaeological_sites }
	}

	planet = {
		name = "NAME_Salvold"
		class = "pc_shrouded"
		orbit_distance = 15
		orbit_angle = 100
		size = 4
		has_ring = no
		init_effect = {
			prevent_anomaly = yes
		}
		flags = { planet_Salvold suppress_archaeological_sites }
	}

	planet = {
		name = "NAME_Frince"
		class = "pc_shrouded"
		orbit_distance = 15
		orbit_angle = 10
		size = 5
		has_ring = no
		init_effect = {
			prevent_anomaly = yes
		}
		flags = { planet_Frince suppress_archaeological_sites }
	}
}

# Metal Planet System
metal_planet_system_initializer = {
	class = "sc_g"
	usage = misc_system_init

	usage_odds = {
		base = 5
		modifier = {
			factor = 0
			has_star_flag = empire_cluster
		}
		modifier = {
			factor = 0
			is_bottleneck_system = yes
		}
		modifier = {
			factor = 0
			has_cosmic_storms_dlc = no
		}
	}

	max_instances = 1
	scaled_spawn_chance = 100

	asteroid_belt = {
		type = debris_asteroid_belt
		radius = 158
	}

	planet = {
		class = pc_g_star
		orbit_distance = 0
	}

	change_orbit = 75

	planet = {
		class = "pc_desert"
		orbit_distance = 45
		orbit_angle = 1
		size = {
			min = 18
			max = 22
		}
		has_ring = no
		entity = "metallic_planet_entity"
		init_effect = {
			add_modifier = {
				modifier = metal_planet
				days = -1
			}
		}
	}

	change_orbit = 45

	planet = {
		count = { min = 1 max = 3 }
		orbit_distance = 20
		orbit_angle = { min = 90 max = 270 }
		class = random_non_colonizable
		change_orbit = @base_moon_distance

		moon = {
			count = { min = 0 max = 1 }
			class = random_non_colonizable
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 5
		}
	}
}

# Previously Terraformed System
previously_terraformed_planet_system_initializer = {
	class = "rl_standard_stars"
	usage = misc_system_init
	usage_odds = {
		base = 5
		modifier = {
			factor = 0
			has_star_flag = empire_cluster
		}
		modifier = {
			factor = 0
			is_bottleneck_system = yes
		}
		modifier = {
			factor = 0
			has_cosmic_storms_dlc = no
		}
	}
	max_instances = 1
	scaled_spawn_chance = 100

	asteroid_belt = {
		type = debris_asteroid_belt
		radius = 158
	}

	asteroid_belt = {
		type = rocky_asteroid_belt
		radius = 100
	}

	planet = {
		class = star
		count = { min = 1 max = 2 }
		orbit_angle = { min = 0 max = 270 }
		orbit_distance = 40
	}

	change_orbit = 60

	planet = {
		class = "pc_continental"
		orbit_distance = 60
		orbit_angle = 1
		size = {
			min = 18
			max = 25
		}
		has_ring = yes
		entity = "previously_terraformed_planet_entity"
		init_effect = {
			add_modifier = {
				modifier = previously_terraformed_planet
				days = -1
			}
		}
	}

	change_orbit = 45

	planet = {
		count = { min = 0 max = 4 }
		orbit_distance = 20
		orbit_angle = { min = 90 max = 270 }
		class = random_non_colonizable
		change_orbit = @base_moon_distance

		moon = {
			count = { min = 0 max = 2 }
			class = random_non_colonizable
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 5
		}
	}
}

# Collided Planet System
collided_planet_system_initializer = {
	class = "sc_m_giant"
	usage = misc_system_init

	usage_odds = {
		base = 5
		modifier = {
			factor = 0
			has_star_flag = empire_cluster
		}
		modifier = {
			factor = 0
			is_bottleneck_system = yes
		}
		modifier = {
			factor = 0
			has_cosmic_storms_dlc = no
		}
	}

	max_instances = 1
	scaled_spawn_chance = 100

	planet = {
		class = pc_m_star
		orbit_distance = 0
	}

	change_orbit = 75

	planet = {
		class = "pc_continental"
		orbit_distance = 45
		orbit_angle = 1
		size = {
			min = 25
			max = 30
		}
		has_ring = yes
		entity = "collided_planet_entity"
		init_effect = {
			add_modifier = {
				modifier = collided_planet
				days = -1
			}

			add_blocker = {
				type = d_former_battlefield
			}
			add_blocker = {
				type = d_ruined_arcology
			}
			add_blocker = {
				type = d_deep_sinkhole
			}
			add_blocker = {
				type = d_noxious_swamp
			}
			add_blocker = {
				type = d_radioactive_wasteland
			}
			add_blocker = {
				type = d_city_ruins
			}
			add_blocker = {
				type = d_crater
			}
			add_blocker = {
				type = d_ruined_district
			}
		}

		moon = {
			count = { min = 3 max = 3 }
			class = pc_asteroid
			entity = "asteroid"
			orbit_angle = { min = 0 max = 360 }
			orbit_distance = 10
			size = { min = 1 max = 2 }
		}
	}

	change_orbit = 75

	planet = {
		count = { min = 1 max = 4 }
		orbit_distance = 30
		orbit_angle = { min = 0 max = 270 }
		class = random_non_colonizable
		change_orbit = @base_moon_distance

		moon = {
			count = { min = 0 max = 1 }
			class = random_non_colonizable
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 5
		}
	}

	planet = {
		count = { min = 1 max = 2 }
		class = pc_asteroid
		orbit_distance = 20
		orbit_angle = 10
		init_effect = {
			set_deposit = d_minerals_3
		}
	}
}

# Wooden Planet System
wooden_planet_system_initializer = {
	class = "sc_g"
	usage = misc_system_init

	usage_odds = {
		base = 5
		modifier = {
			factor = 0
			has_star_flag = empire_cluster
		}
		modifier = {
			factor = 0
			is_bottleneck_system = yes
		}
		modifier = {
			factor = 0
			has_cosmic_storms_dlc = no
		}
	}

	max_instances = 1
	scaled_spawn_chance = 100

	planet = {
		class = star
		orbit_distance = 0
	}

	change_orbit = 75

	planet = {
		class = "pc_tropical"
		orbit_distance = 45
		orbit_angle = 1
		size = {
			min = 18
			max = 22
		}
		has_ring = no
		entity = "wooden_planet_entity"
		init_effect = {
			add_modifier = {
				modifier = wooden_planet
				days = -1
			}
		}
	}

	change_orbit = 45

	planet = {
		count = { min = 0 max = 2 }
		orbit_distance = 20
		orbit_angle = { min = 90 max = 270 }
		class = random_non_colonizable
		change_orbit = @base_moon_distance
	}

	change_orbit = 60

	planet = {
		count = { min = 0 max = 1 }
		orbit_distance = 45
		orbit_angle = { min = 90 max = 270 }
		class = random_colonizable
		change_orbit = @base_moon_distance

		moon = {
			count = { min = 0 max = 1 }
			class = random_non_colonizable
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 5
		}
	}
}
